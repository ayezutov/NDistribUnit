<html>
<head>
    <title>NDistribUnit dashboard</title>
    <script type="text/javascript" src="scripts/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" src="scripts/jquery-ui-1.8.9.custom.min.js"></script>
    <!-- http://docs.jquery.com/Plugins/Treeview -->
    <link rel="stylesheet" href="scripts/jquery.treeview/jquery.treeview.css" type="text/css" />
    <link rel="stylesheet" href="styles/NDistribUnit.Dashboard.css" type="text/css" />
    <script type="text/javascript" src="scripts/jquery.treeview/jquery.treeview.js"></script>
    <!-- http://layout.jquery-dev.net/documentation.cfm -->
    <script type="text/javascript" src="scripts/jquery.layout.min.js"></script>
    <!-- http://tkyk.github.com/jquery-history-plugin/#documentation -->
    <script type="text/javascript" src="scripts/jquery.history.js"></script>
    <!-- http://jtemplates.tpython.com/ -->
    <script type="text/javascript" src="scripts/jquery-jtemplates.js"></script>
    <script type="text/javascript" src="javascriptEnums.js"></script>
    <script type="text/javascript" src="scripts/NDistribUnit.Helpers.js"></script>
    <script type="text/javascript" src="scripts/NDistribUnit.Dashboard.Server.js"></script>
    <script type="text/javascript" src="scripts/NDistribUnit.Dashboard.UI.js"></script>
    <script type="text/javascript" src="scripts/NDistribUnit.Dashboard.Dispatcher.js"></script>
    <script type="text/javascript" src="scripts/NDistribUnit.Dashboard.js"></script>
    <script type="text/javascript">
        var dashboard = new Dashboard();

        $(function () { dashboard.init(); });
    </script>
</head>
<body>
    <div id="menu-pane">
        <div style="float: left;">
            <img id="logo" alt="NDistribUnit" src="images/logo-medium.gif" /></div>
        <div id="" class="menuCommandRight">
            <a href="#settings">
                <img alt="settings" src="images/settings.gif" />
                Settings</a></div>
        <div id="infoCommand" class="menuCommandRight">
            <a href="#status">
                <img alt="info" src="images/info.gif" />
                Status</a></div>
        <div id="homeCommand" class="menuCommandRight">
            <a href="#tests">
                <img alt="home" src="images/home.gif" />
                Home</a></div>
    </div>
    <div id="content-pane">
        <div id="tests-pane" class="content">
            <div id="tests-tree-pane" class="left-menu-pane">
                <ul>
                    <li><span><a href="#tests/O2I_nightly">O2I nightly</a></span>
                        <ul style="display: none;">
                            <li><span><a href="#run_2791873">19 Feb 2010 [epmsd122/dev]</a></span>
                                <ul style="display: none;">
                                    <li><span class="success"><a href="#tests/O2I_nightly/Test.Suite.Namespace.Item1_1">item 1.1</a></span></li>
                                    <li><span class="failed"><a href="#tests/O2I_nightly/Test.Suite.Namespace.Item1_2">item 1.2</a></span></li>
                                    <li><span class="running"><a href="#tests/O2I_nightly/Test.Suite.Namespace.Item1_3">item 1.3</a></span></li>
                                </ul>
                            </li>
                            <li><span class="failed">18 Feb 2010 [epmsd122/dev]</span>
                                <ul style="display: none;">
                                    <li><span class="success">item 1.1</span></li>
                                    <li><span class="failed">item 1.2</span></li>
                                    <li><span class="ignored">item 1.3</span></li>
                                </ul>
                            </li>
                            <li><span class="success">17 Feb 2010 [epmsd122/dev]</span>
                                <ul style="display: none;">
                                    <li><span class="success">item 1.1</span></li>
                                    <li><span class="success">item 1.2</span></li>
                                    <li><span class="ignored">item 1.3</span></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><span>O2I for 6.0</span>
                        <ul style="display: none;">
                            <li><span>19 Feb 2010 [STG]</span>
                                <ul style="display: none;">
                                    <li><span class="success">item 1.1</span></li>
                                    <li><span class="failed">item 1.2</span></li>
                                    <li><span class="running">item 1.3</span></li>
                                </ul>
                            </li>
                            <li><span class="failed">18 Feb 2010 [STG]</span>
                                <ul style="display: none;">
                                    <li><span class="success">item 1.1</span></li>
                                    <li><span class="failed">item 1.2</span></li>
                                    <li><span class="ignored">item 1.3</span></li>
                                </ul>
                            </li>
                            <li><span class="success">17 Feb 2010 [TST]</span>
                                <ul style="display: none;">
                                    <li><span class="success">item 1.1</span></li>
                                    <li><span class="success">item 1.2</span></li>
                                    <li><span class="ignored">item 1.3</span></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div id="test-content-pane" class="right-content-pane">
                Test results for selected run/suite/test
            </div>
        </div>
        <div id="status-pane" class="content">
            <div id="status-tree-pane" class="left-menu-pane">
                <ul class="list-menu">
                    <li><a href="#status/server" id="server-status-menu">Server status</a></li>
                    <li><a href="#status/clients" id="clients-statuses-menu">Clients' statuses</a></li>
                </ul>
            </div>
            <div id="status-content-pane" class="right-content-pane">
                <div id="status-home-page">
                    You can find the statuses of all parts of NDistribUnit here.
                </div>
                <div id="server-status-pane">
                    Server's status (execution queue, logs)
                </div>
                <div id="clients-statuses-pane">
                    <p style="display: none">
                        <textarea id="clients-statuses-template" rows="0" cols="0"><!--
                        {#template MAIN}
                         {#if $T.data.length==0}
                            no agents are available
                         {#else}
                             {#foreach $T.data as agent}
                              {#include row root=$T.agent}
                             {#/for}
                         {#/if}
                        {#/template MAIN}

                        {#template row}
                         <div id="agent-{$T.Name}" class="agent { Helper.getEnumNameByValue(AgentState, $T.State)}">
                          <span class="agent-name">{$T.Name}</span><br/>
                          <span class="agent-timestamp">
                              <span class="agent-time">{Helper.getJsonDate($T.LastStatusUpdate).toLocaleTimeString()},</span>
                              <span class="agent-date">{Helper.getJsonDate($T.LastStatusUpdate).toLocaleDateString()}</span>
                          </span>
                         </div>
                        {#/template row}

                    --></textarea></p>
                    <h3 style="height: 20px;">
                        Agents' statuses:
                        <img id="client-status-progress" style="vertical-align: text-top" alt="sync" src="images/syncing.gif" />
                    </h3>
                    <div class="agent-legend">
                        <span class="agent Connected">-&nbsp;Connected</span> <span class="agent Busy">-&nbsp;Busy</span>
                        <span class="agent Disconnected">-&nbsp;Disconnected</span> <span class="agent Unknown">
                            -&nbsp;Unknown</span>
                    </div>
                    <div style="clear: both;">
                    </div>
                    <div id="client-status-error" class="error" style="display: none">
                        Oooops...</div>
                    <div id="clients-statuses-display-area">
                    </div>
                    <div style="display: none;">
                        <h3 style="float: left;">
                            Log:
                        </h3>
                        <div style="clear: both;">
                        </div>
                        <div id="client-status-log">
                            log goes here</div>
                    </div>
                </div>
            </div>
        </div>
        <div id="settings-pane" class="content">
            <div id="settings-tree-pane" class="left-menu-pane">
                Menu settings tree goes here</div>
            <div id="settings-content-pane" class="right-content-pane">
                Menu settings content goes here
            </div>
        </div>
    </div>
</body>
</html>
